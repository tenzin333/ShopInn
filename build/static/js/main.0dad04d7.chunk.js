(this["webpackJsonpreact-app"]=this["webpackJsonpreact-app"]||[]).push([[0],{134:function(e,t,n){"use strict";n.r(t);var c=n(0),r=n(12),a=n.n(r),s=(n(94),n(7)),i=n.n(s),o=n(10),j=n(11),l=n(16),u=n(30),d=n(167),b=n(2),h=function(e){var t=e.item,n=e.onUpdateCartQty,c=e.onRemoveFromcart;return Object(b.jsx)("div",{children:Object(b.jsx)("div",{className:"card cart",children:Object(b.jsxs)("ul",{children:[Object(b.jsxs)("li",{children:[" ",Object(b.jsx)("img",{src:t.media.source})]}),Object(b.jsx)("li",{children:Object(b.jsxs)("div",{children:[Object(b.jsx)("h3",{children:t.name}),Object(b.jsxs)("p",{children:["Total Price : ",t.line_total.formatted_with_symbol]})]})}),Object(b.jsx)("li",{children:Object(b.jsxs)("div",{className:"flex-jc",children:[Object(b.jsxs)("div",{className:"qty",children:["Qty :",Object(b.jsx)("button",{onClick:function(){return n(t.id,t.quantity-1)},children:"-"}),Object(b.jsx)("h4",{children:t.quantity}),Object(b.jsx)("button",{onClick:function(){return n(t.id,t.quantity+1)},children:"+"})]}),Object(b.jsx)("button",{className:"remove-btn",onClick:function(){return c(t.id)},children:"REMOVE"})]})})]})})})},p=function(e){var t=e.cart,n=e.handleUpdateCartQty,c=(e.handleEmptyCart,e.handleAddToCart,e.handleRemoveFromCart);if(!t.line_items)return"Loading...";return Object(b.jsxs)("div",{children:[Object(b.jsx)("h1",{children:"Your Shopping Cart"}),Object(b.jsx)("div",{children:t.line_items.length?Object(b.jsx)("div",{children:Object(b.jsx)("div",{className:"product-grid",children:t.line_items.map((function(e){return Object(b.jsx)(h,{item:e,onUpdateCartQty:n,onRemoveFromcart:c})}))})}):Object(b.jsx)("div",{children:Object(b.jsx)(l.b,{to:"/",children:"You have 0 Itemes in the Cart.Go back to Shopping"})})}),Object(b.jsxs)("div",{className:"subTotal",children:[Object(b.jsxs)("h3",{children:["Subtotal : ",t.subtotal.formatted_with_symbol]}),Object(b.jsxs)("div",{className:"sub-btn",children:[Object(b.jsx)(l.b,{className:"chkout-btn",to:"/",children:"BACK"}),Object(b.jsx)(l.b,{to:"/checkout",className:"chkout-btn",children:"CHECKOUT"})]})]})]})},O=function(e){var t=e.totalItems;return Object(b.jsxs)("div",{children:[Object(b.jsx)("div",{className:"navbar",children:Object(b.jsxs)("nav",{children:[Object(b.jsxs)("div",{className:"logo",children:[Object(b.jsx)("span",{children:Object(b.jsx)(l.b,{to:"/",children:Object(b.jsx)("img",{className:"logo-img",src:"/images/logo.jpg"})})}),Object(b.jsx)("a",{className:"link-logo",href:"/",children:"ShopIn"})]}),Object(b.jsx)(l.b,{to:"/cart",className:"a-tag",children:Object(b.jsx)(d.a,{badgeContent:t,color:"secondary",children:Object(b.jsx)(u.d,{className:"icon-cart"})})})]})}),Object(b.jsx)("hr",{})]})},m=function(e){var t=e.product,n=e.onAddToCart;return Object(b.jsx)("div",{children:Object(b.jsx)("div",{className:"card",children:Object(b.jsxs)("ul",{children:[Object(b.jsxs)("li",{children:[" ",Object(b.jsx)("img",{src:t.media.source})]}),Object(b.jsx)("li",{children:Object(b.jsxs)("div",{className:"product-name-price",children:[Object(b.jsxs)("div",{children:[t.name," "]}),Object(b.jsxs)("div",{children:[" ",t.price.formatted_with_symbol]})]})}),Object(b.jsx)("li",{className:"prod-desc",dangerouslySetInnerHTML:{__html:t.description}}),Object(b.jsx)("li",{children:Object(b.jsx)("button",{className:"CartIcon",onClick:function(){return n(t.id,1)},children:Object(b.jsx)(u.a,{className:"faCartIcon"})})})]})})})},x=function(e){var t=e.products,n=e.onAddToCart;return Object(b.jsx)("div",{className:"product-grid",children:t.map((function(e){return Object(b.jsx)(m,{product:e,onAddToCart:n})}))})},f=n(177),v=n(178),g=n(175),y=n(179),k=n(180),w=n(174),C=n(188),N=n(181),S=n(183),_=n(14),T=n(78),E=new(n.n(T).a)("pk_test_25283ab8870cda606d017704d5c1b327f3d4bbf0c433a",!0),q=function(e){var t=e.checkoutToken;return Object(b.jsxs)("div",{children:[t.live.line_items.map((function(e){return Object(b.jsx)("div",{children:Object(b.jsxs)("div",{className:"orderList",children:[Object(b.jsxs)("div",{className:"jc-sb",children:[Object(b.jsx)("div",{className:"itemName",children:e.name}),Object(b.jsx)("div",{className:"price",children:e.line_total.formatted_with_symbol})]}),Object(b.jsxs)("div",{className:"qty",children:["Quantity : ",e.quantity]})]})})})),Object(b.jsx)("div",{className:"orderList",children:Object(b.jsx)("div",{children:Object(b.jsxs)("div",{className:"chk-subtotal",children:["Sub Total : ",t.live.subtotal.formatted_with_symbol]})})})]})},I=n(79),L=n(47),A=Object(I.a)("pk_test_51IZVbZSEoWjVNZ61z34kBI9lTNfZVknrfqPUl5QPil858t10ILwovUGWf6ai422J7a6kejLIU86nDoPHu35nob0400qzI6NgAW"),B=function(e){var t=e.shippingData,n=e.checkoutToken,c=e.nextStep,r=e.backStep,a=e.onCaptureCheckout,s=function(){var e=Object(o.a)(i.a.mark((function e(r,s,o){var j,l,u,d,b;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(r.preventDefault(),o&&s){e.next=3;break}return e.abrupt("return");case 3:return j=s.getElement(L.CardElement),e.next=6,o.createPaymentMethod({type:"card",card:j});case 6:l=e.sent,u=l.error,d=l.paymentMethod,u?console.log(u):(b={list_items:n.live.line_items,customer:{firstname:t.fname,lastname:t.lname,email:t.email},shipping:{name:"International",street:t.address1,town_city:t.city,county_state:t.shippingSubdivision,postal_zip_code:t.zip,country:t.shippingCountry},fulfillment:{shipping_method:t.shippingOption},payment:{gateway:"stripe",stripe:{payment_method_id:d.id}}},a(n.id,b),c());case 10:case"end":return e.stop()}}),e)})));return function(t,n,c){return e.apply(this,arguments)}}();return Object(b.jsx)("div",{children:Object(b.jsxs)("div",{className:"flex-colummn",children:[Object(b.jsx)("h3",{children:"Order Summary"}),Object(b.jsx)(q,{checkoutToken:n}),Object(b.jsxs)("div",{children:[Object(b.jsx)("h3",{children:"Payment Method"}),Object(b.jsx)(L.Elements,{stripe:A,children:Object(b.jsx)(L.ElementsConsumer,{children:function(e){var t=e.elements,n=e.stripe;return Object(b.jsxs)("form",{onSubmit:function(e){return s(e,t,n)},children:[Object(b.jsx)(L.CardElement,{className:"payment-form"}),Object(b.jsx)("br",{}),Object(b.jsxs)("div",{className:"flex-jc",children:[Object(b.jsx)("button",{className:"chkout-btn",onClick:r,children:"Back"}),Object(b.jsx)("button",{type:"submit",className:"chkout-btn",children:" Pay "})]})]})}})})]})]})})},F=n(34),P=n(44),R=n(171),U=n(184);var Q=function(e){var t=e.name,n=e.label,c=e.required,r=Object(P.d)().control;return Object(b.jsx)(R.a,{item:!0,xs:12,sm:6,children:Object(b.jsx)(P.a,{as:U.a,name:t,control:r,label:n,fullWidth:!0,required:c,error:!1})})},W=n(186),z=n(182),M=n(187),Z=function(e){var t=e.checkoutToken,n=e.test,r=(e.nextStep,Object(c.useState)([])),a=Object(j.a)(r,2),s=a[0],u=a[1],d=Object(c.useState)(" "),h=Object(j.a)(d,2),p=h[0],O=h[1],m=Object(c.useState)([]),x=Object(j.a)(m,2),f=x[0],v=x[1],y=Object(c.useState)(" "),k=Object(j.a)(y,2),w=k[0],C=k[1],N=Object(c.useState)([]),S=Object(j.a)(N,2),_=S[0],T=S[1],q=Object(c.useState)(""),I=Object(j.a)(q,2),L=I[0],A=I[1],B=Object(P.c)(),U=(Object.entries(s).map((function(e){var t=Object(j.a)(e,2);return{id:t[0],label:t[1]}})),_.map((function(e){return{id:e.id,label:"".concat(e.description," - (").concat(e.price.formatted_with_symbol,")")}})),Object.entries(f).map((function(e){var t=Object(j.a)(e,2);return{id:t[0],label:t[1]}})),function(){var e=Object(o.a)(i.a.mark((function e(t){var n,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.services.localeListShippingCountries(t);case 2:n=e.sent,c=n.countries,u(c),O(Object.keys(c)[0]);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),Z=function(){var e=Object(o.a)(i.a.mark((function e(t){var n,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.services.localeListSubdivisions(t);case 2:n=e.sent,c=n.subdivisions,v(c),C(Object.keys(c)[0]);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),D=function(){var e=Object(o.a)(i.a.mark((function e(t,n){var c,r,a=arguments;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c=a.length>2&&void 0!==a[2]?a[2]:null,e.next=3,E.checkout.getShippingOptions(t,{country:n,region:c});case 3:r=e.sent,T(r),A(r[0].id);case 6:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}();Object(c.useEffect)((function(){U(t.id)}),[]),Object(c.useEffect)((function(){p&&Z(p)}),[p]),Object(c.useEffect)((function(){w&&(console.log(w),D(t.id,p,w))}),[w]);return Object(b.jsx)(P.b,Object(F.a)(Object(F.a)({},B),{},{children:Object(b.jsxs)("form",{onSubmit:B.handleSubmit((function(e){return n(Object(F.a)(Object(F.a)({},e),{},{shippingCountry:p,shippingSubdivision:w,shippingOption:L}))})),children:[Object(b.jsxs)(R.a,{container:!0,spacing:3,children:[Object(b.jsx)(Q,{required:!0,name:"fname",label:"First Name"}),Object(b.jsx)(Q,{required:!0,name:"lname",label:"Last Name"}),Object(b.jsx)(Q,{required:!0,name:"address1",label:"Address line 1"}),Object(b.jsx)(Q,{required:!0,name:"email",label:"Email"}),Object(b.jsx)(Q,{required:!0,name:"city",label:"City"}),Object(b.jsx)(Q,{required:!0,name:"zip",label:"Zip / Postal code"}),Object(b.jsxs)(R.a,{item:!0,xs:12,sm:6,children:[Object(b.jsx)(W.a,{children:"Shipping Country"}),Object(b.jsx)(z.a,{value:p,fullWidth:!0,onChange:function(e){return O(e.target.value)},children:Object.entries(s).map((function(e){var t=Object(j.a)(e,2);return{id:t[0],label:t[1]}})).map((function(e){return Object(b.jsx)(M.a,{value:e.id,children:e.label},e.id)}))})]}),Object(b.jsxs)(R.a,{item:!0,xs:12,sm:6,children:[Object(b.jsx)(W.a,{children:"Shipping Subdivision"}),Object(b.jsx)(z.a,{value:w,fullWidth:!0,onChange:function(e){return C(e.target.value)},children:Object.entries(f).map((function(e){var t=Object(j.a)(e,2);return{id:t[0],label:t[1]}})).map((function(e){return Object(b.jsx)(M.a,{value:e.id,children:e.label},e.id)}))})]}),Object(b.jsxs)(R.a,{item:!0,xs:12,sm:6,children:[Object(b.jsx)(W.a,{children:"Shipping Options"}),Object(b.jsx)(z.a,{value:L,fullWidth:!0,onChange:function(e){return A(e.target.value)},children:_.map((function(e){return{id:e.id,label:"".concat(e.description," - (").concat(e.price.formatted_with_symbol,")")}})).map((function(e){return Object(b.jsx)(M.a,{value:e.id,children:e.label},e.id)}))})]})]}),Object(b.jsx)("br",{}),Object(b.jsxs)("div",{style:{display:"flex",justifyContent:"space-between"},children:[Object(b.jsx)(g.a,{component:l.b,variant:"outlined",to:"/cart",children:"Back to Cart"}),Object(b.jsx)(g.a,{type:"submit",variant:"contained",color:"primary",children:"Next"})]})]})}))},D=n(17),V=n(176),H=Object(V.a)((function(e){var t;return{appBar:{position:"relative"},toolbar:e.mixins.toolbar,layout:Object(D.a)({marginTop:"5%",width:"auto",marginLeft:e.spacing(2),marginRight:e.spacing(2)},e.breakpoints.up(600+2*e.spacing(2)),{width:600,marginLeft:"auto",marginRight:"auto"}),paper:(t={marginTop:e.spacing(3),marginBottom:e.spacing(3),padding:e.spacing(2)},Object(D.a)(t,e.breakpoints.down("xs"),{width:"100%",marginTop:0,paddingTop:0}),Object(D.a)(t,e.breakpoints.up(600+2*e.spacing(3)),{marginTop:e.spacing(6),marginBottom:e.spacing(6),padding:e.spacing(3)}),t),stepper:{padding:e.spacing(3,0,5)},buttons:{display:"flex",justifyContent:"flex-end"},button:{marginTop:e.spacing(3),marginLeft:e.spacing(1)},divider:{margin:"20px 0"},spinner:{display:"flex",justifyContent:"center",alignItems:"center"}}})),J=["Shipping address","Payment details"],G=function(e){var t=e.error,n=e.cart,r=e.order,a=e.onCaptureCheckout,s=Object(c.useState)(null),u=Object(j.a)(s,2),d=u[0],h=u[1],p=Object(c.useState)(0),O=Object(j.a)(p,2),m=O[0],x=O[1],T=Object(c.useState)({}),q=Object(j.a)(T,2),I=q[0],L=q[1],A=H(),F=Object(_.f)(),P=function(){return x((function(e){return e+1}))},R=function(){return x((function(e){return e-1}))};Object(c.useEffect)((function(){n.id&&function(){var e=Object(o.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,console.log("calling"),e.next=4,E.checkout.generateTokenFrom("cart",n.id).then((function(e){return h(e)}));case 4:e.next=10;break;case 6:e.prev=6,e.t0=e.catch(0),console.log(e.t0),m!==J.length&&F.push("/");case 10:case"end":return e.stop()}}),e,null,[[0,6]])})));return function(){return e.apply(this,arguments)}}()()}),[n]);var U=function(e){L(e),P()};console.log(I);var Q=function(){return r.customer?Object(b.jsxs)(b.Fragment,{children:[Object(b.jsxs)("div",{children:[Object(b.jsxs)(f.a,{variant:"h5",children:["Thank you for your purchase, ",r.customer.firstname," ",r.customer.lastname,"!"]}),Object(b.jsx)(v.a,{className:A.divider}),Object(b.jsxs)(f.a,{variant:"subtitle2",children:["Order ref: ",r.customer_reference]})]}),Object(b.jsx)("br",{}),Object(b.jsx)(g.a,{component:l.b,variant:"outlined",type:"button",to:"/",children:"Back to home"})]}):Object(b.jsx)("div",{className:A.spinner,children:Object(b.jsx)(y.a,{})})};t&&(Q=function(){return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsxs)(f.a,{variant:"h5",children:["Error: ",t]}),Object(b.jsx)("br",{}),Object(b.jsx)(g.a,{component:l.b,variant:"outlined",type:"button",to:"/",children:"Back to home"})]})});var W=function(){return 0===m?Object(b.jsx)(Z,{checkoutToken:d,test:U,backStep:R,next:P}):Object(b.jsx)(B,{shippingData:I,checkoutToken:d,backStep:R,nextStep:P,onCaptureCheckout:a})};return Object(b.jsxs)(b.Fragment,{children:[Object(b.jsx)(k.a,{}),Object(b.jsx)("div",{className:A.toolbar}),Object(b.jsx)("main",{className:A.layout,children:Object(b.jsxs)(w.a,{className:A.paper,children:[Object(b.jsx)(f.a,{variant:"h4",align:"center",children:"Checkout"}),Object(b.jsx)(C.a,{activeStep:m,className:A.stepper,children:J.map((function(e){return Object(b.jsx)(N.a,{children:Object(b.jsx)(S.a,{children:e})},e)}))}),m===J.length?Object(b.jsx)(Q,{}):d&&Object(b.jsx)(W,{})]})})]})},K=function(){return Object(b.jsxs)("div",{className:"footer",children:[Object(b.jsx)("div",{className:"copyright",children:"Copyright \xa9 2017 All Rights Reserved by Tenzin Thinlay."}),Object(b.jsx)("div",{className:"footer-links",children:Object(b.jsxs)("ul",{children:[Object(b.jsxs)("li",{children:[Object(b.jsx)("a",{href:"https://www.facebook.com/",children:Object(b.jsx)(u.b,{className:"social-icons-bg"})})," "]}),Object(b.jsxs)("li",{children:[Object(b.jsx)("a",{href:"https://www.facebook.com/",children:Object(b.jsx)(u.e,{className:"social-icons-bg"})})," "]}),Object(b.jsxs)("li",{children:[Object(b.jsx)("a",{href:"https://www.facebook.com/",children:Object(b.jsx)(u.c,{className:"social-icons-bg"})})," "]})]})})]})},Y=function(){var e=Object(c.useState)([]),t=Object(j.a)(e,2),n=t[0],r=t[1],a=Object(c.useState)({}),s=Object(j.a)(a,2),u=s[0],d=s[1],h=Object(c.useState)(""),m=Object(j.a)(h,2),f=m[0],v=m[1],g=Object(c.useState)({}),y=Object(j.a)(g,2),k=y[0],w=y[1],C=function(){var e=Object(o.a)(i.a.mark((function e(){var t,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.products.list();case 2:t=e.sent,n=t.data,r(n);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),N=function(){var e=Object(o.a)(i.a.mark((function e(){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.t0=d,e.next=3,E.cart.retrieve();case 3:e.t1=e.sent,(0,e.t0)(e.t1);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),S=function(){var e=Object(o.a)(i.a.mark((function e(t,n){var c,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.cart.update(t,{quantity:n});case 2:c=e.sent,r=c.cart,d(r);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),T=function(){var e=Object(o.a)(i.a.mark((function e(t,n){var c,r;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.cart.add(t,n);case 2:c=e.sent,r=c.cart,d(r);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),q=function(){var e=Object(o.a)(i.a.mark((function e(t){var n,c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.cart.remove(t);case 2:n=e.sent,c=n.cart,d(c);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),I=function(){var e=Object(o.a)(i.a.mark((function e(){var t,n;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.cart.empty();case 2:t=e.sent,n=t.cart,d(n);case 5:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),L=function(){var e=Object(o.a)(i.a.mark((function e(){var t;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,E.cart.refresh();case 2:t=e.sent,d(t);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),A=function(){var e=Object(o.a)(i.a.mark((function e(t,n){var c;return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log(n),e.prev=1,e.next=4,E.checkout.capture(t,n);case 4:c=e.sent,w(c),L(),e.next=13;break;case 9:e.prev=9,e.t0=e.catch(1),v(e.t0.data.error.message),console.log(e.t0);case 13:case"end":return e.stop()}}),e,null,[[1,9]])})));return function(t,n){return e.apply(this,arguments)}}();return Object(c.useEffect)((function(){N(),C()}),[]),Object(b.jsxs)(l.a,{children:[Object(b.jsx)(O,{totalItems:u.total_items}),Object(b.jsx)("main",{children:Object(b.jsxs)(_.c,{children:[Object(b.jsx)(_.a,{exact:!0,path:"/",children:Object(b.jsx)(x,{products:n,onAddToCart:T})}),Object(b.jsx)(_.a,{exact:!0,path:"/cart",children:Object(b.jsx)(p,{cart:u,handleEmptyCart:I,handleAddToCart:T,handleRemoveFromCart:q,handleUpdateCartQty:S})}),Object(b.jsx)(_.a,{exact:!0,path:"/checkout",children:Object(b.jsx)(G,{cart:u,order:k,onCaptureCheckout:A,error:f})})]})}),Object(b.jsx)(K,{})]})};a.a.render(Object(b.jsx)(Y,{}),document.getElementById("root"))},94:function(e,t,n){}},[[134,1,2]]]);
//# sourceMappingURL=main.0dad04d7.chunk.js.map